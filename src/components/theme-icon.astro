<button id="themeToggle" aria-label="Toggle theme"> ðŸŒž </button>

<script is:inline>
	(() => {
		const lightThemeName = "light";
		const darkThemeName = "dark";

		const theme = (() => {
			if (typeof localStorage !== "undefined" && localStorage.getItem("theme")) {
				return localStorage.getItem("theme") ?? lightThemeName;
			}
			if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
				return darkThemeName;
			}
			return lightThemeName;
		})();

		// Set initial theme
		document.body.setAttribute("data-theme", theme);
		const button = document.getElementById("themeToggle");
		button.textContent = theme === darkThemeName ? "ðŸŒ™" : "ðŸŒž";

		const handleToggleClick = () => {
			const body = document.body;
			const isDark = body.getAttribute("data-theme") === darkThemeName;

			// Toggle theme
			const newTheme = isDark ? lightThemeName : darkThemeName;
			body.setAttribute("data-theme", newTheme);
			localStorage.setItem("theme", newTheme);

			// Update button text
			button.textContent = newTheme === darkThemeName ? "ðŸŒ™" : "ðŸŒž";
		};

		button.addEventListener("click", handleToggleClick);
	})();
</script>
